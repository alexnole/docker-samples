# =================================================================================
#                           DynamoDB Docker Compose
#
# This configuration launches a DynamoDB database container with Docker Compose.
# It is intended for development and testing environments only.
# For production use, review and adjust security, storage, and networking settings.
#
# Usage:
#   1. Set required environment variables.
#   2. Start with: docker compose up -d
#   3. Connect to DynamoDB on the configured port (default: 8000)
# =================================================================================

# Project name
name: databases

# Docker services
services:
  dynamodb:
    # https://hub.docker.com/r/amazon/dynamodb-local
    image: amazon/dynamodb-local:${IMAGE_TAG:-latest}
    container_name: ${CONTAINER_NAME:-dynamodb}
    restart: ${RESTART_POLICY:-always}

    user: root
    working_dir: /home/dynamodblocal
    command: ["-jar", "DynamoDBLocal.jar", "-sharedDb", "-dbPath", "./data"]

    ports:
      - ${PORT:-8000}:8000

    volumes:
      - dynamodb_data:/home/dynamodblocal/data

    networks:
      - local

# Docker volumes
volumes:
  dynamodb_data:
    name: ${VOLUME_DATA_NAME:-dynamodb_data}
    driver: local

# Docker networks
networks:
  local:
    name: ${NETWORK_NAME:-databases_local}
    driver: bridge

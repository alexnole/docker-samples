# =================================================================================
#                           PostgreSQL Docker Compose
#
# This configuration launches a PostgreSQL database container with Docker Compose.
# It is intended for development and testing environments only.
# For production use, review and adjust security, storage, and networking settings.
#
# Usage:
#   1. Set required environment variables.
#   2. Start with: docker compose up -d
#   3. Connect to PostgreSQL on the configured port (default: 5432)
# =================================================================================

# Project name
name: databases

# Docker services
services:
  pgsql:
    # https://hub.docker.com/_/postgres
    image: postgres:${IMAGE_TAG:-latest}
    container_name: ${CONTAINER_NAME:-pgsql}
    restart: ${RESTART_POLICY:-always}

    environment:
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_USER: ${POSTGRES_USER:-postgres}
      POSTGRES_DB: ${POSTGRES_DB:-local}

    ports:
      - ${PORT:-5432}:5432

    volumes:
      - pgsql_data:/var/lib/postgresql/data

    networks:
      - local

# Docker volumes
volumes:
  pgsql_data:
    name: ${VOLUME_DATA_NAME:-pgsql_data}
    driver: local

# Docker networks
networks:
  local:
    name: ${NETWORK_NAME:-local_dbs_network}
    driver: bridge
